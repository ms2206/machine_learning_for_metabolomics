mtry  = to_tune(2, 7),
nodesize = to_tune(1, 5),
maxnodes = to_tune(2, 20)
)
resampling = rsmp("cv", folds = 3)
measure = msr("classif.acc")
terminator = trm("evals", n_evals = 50)
terminator
#Now we put everything together into a TuningInstanceSingleCrit with the ti() function.
train_Set<-PimaIndiansDiabetes2[split$train,]
task_train<-as_task_classif(type ~ ., data = train_Set)
task_train<-as_task_classif(diabetes ~ ., data = train_Set)
instance = ti(
task = task_train,
learner = learner1,
resampling = resampling,
measures = measure,
terminator = terminator
)
instance
#Set up the tuner
tuner = tnr("grid_search", resolution = 5, batch_size = 4)
tuner
#Trigerring tuner
tuner$optimize(instance)
head(as.data.table(instance$archive))
#Final model
learner1$param_set$values = instance$result_learner_param_vals
learner1$train(task_d)
learner1$model
##Test the new model
# predict data
#test_Set <-zoo1[split$test,]
prediction = learner1$predict(task_d, split$test)
# calculate performance
#classification accuracy
measure = msr("classif.acc")
prediction$score(measure)
#confusion matrix
prediction$confusion
autoplot(prediction)
measures = msrs(c("classif.tpr", "classif.tnr"))
prediction$score(measures)
View(PimaIndiansDiabetes2)
data("PimaIndiansDiabetes2", package = "mlbench")
PimaIndiansDiabetes2 <- as.data.frame(PimaIndiansDiabetes2)
install.packages("devtools")
install.packages("Rtools42Installer")
a
a <- 5
b <- 8
a
d <- 2*a + b^3 -ln(a)
d <- 2*a + b^3 -log(a)
d
c <- a + b
c
c <- a + b
# Print result in console
c
d <- 2*a + b^3 -log(a)
#Print result in console
d
#Define variable z:
z<-23 + 565*exp(-2)
#print z in the console
z
rm(z)
rm(z)
#The values for a, b, and c are given below
a <- 2
b <- 5
c <- 3
# Write the expression for the first solution and save it under variable x1
x1 <- (-b+sqrt(b^2-4*a*c))/2*a
# Write the expression for the second solution and save it under variable x2
x2 <- (-b-sqrt(b^2-4*a*c))/2*a
ls()
rm(list=c("a", "b", "c"))
ls()
M <- matrix(c(1, 3, 5, 7, 9, 11), nrow = 2, byrow=TRUE)
#Print matrix M
M
#Create three numeric vectors of the same length
x1 <- 1:6
x2 <- 2:7
x3 <- seq(3, 18, by=3)
XR <- rbind(x1,x2,x3)
XR
XC <- cbind(x1,x2,x3)
XC
# Multiply a scalar with a matrix
A <- 2*XR
#Print new matrix A
A
# Matrix addition
B <- A - 3*XR
B
# Matrix Multiplication (element by element)
AB <-A*B
AB
#Matrix Division (element by element)
A_B <-A/B
A_B
XX <- XC %*% XR
XX
#Extract element from matrix XX from the 1st row and second column
XX[1,2]
# a) Extract element from matrix XX from the 1st row and 2nd column
XX[1,2]
# b) Extract the 3rd column from matrix XX
XX[,3]
XX[2:3, 3:4]
XX[2:3, 3:4] <- 0
XX
View(XC)
View(XR)
View(A)
View(M)
# Create a vector with the weights in grams
weight <- c(80.3, 93.1, 88.6, 90.4, 67.2, 69.6, 72.5, 63.9, 71.4)
# Create a vector with the cultivar name for each apple
cultivar <- c(rep("Bramley", 5), rep("Gala", 5))
weight
# Create a vector with the apple weights in grams
weight <- c(80.3, 93.1, 88.6, 90.4, 67.2, 69.6, 72.5, 63.9, 71.4)
APPLES <- matrix(weight, nrow = 5)
# Create a vector with the apple weights in grams
weight <- c(80.3, 93.1, 88.6, 90.4, 85.1, 67.2, 69.6, 72.5, 63.9, 71.4)
APPLES <- matrix(weight, nrow = 5)
View(APPLES)
# Name the APPLE matrix rows:
rownames(APPLES) <-c("Rep1", "Rep2", "Rep3", "Rep4", "Rep5")
# Name the APPLE matrix columns:
colnames(APPLES) <- c("Bramley", "Gala")
View(APPLES)
# Transpose matrix APPLES:
t(APPLES)
Array1 <-array(1:20, dim=4)
Array1
Array1 <-array(1:20, dim=c(2,3,4))
Array1
age <-c("18-29", "30-49", "30-49", "18-29", "30-49", ">=70", "30-49", "50-69", "18-29", "50-69")
sex <- factor("Male", "Female", "Male", "Male", "Female", "Male", "Female", "Female", "Male", "Male")
sex <- factor(c("Male", "Female", "Male", "Male", "Female", "Male", "Female", "Female", "Male", "Male"))
caffeine <- factor(c("Zero", "Low", "Zero", "Low", "High", "Zero", "Moderate", "High", "Low", "Moderate", "High",
levels = c("Zero", "Low", "Moderate", "High"),ordered = TRUE))
caffeine <- factor(c("Zero", "Low", "Zero", "Low", "High", "Zero", "Moderate", "High", "Low", "Moderate", "High"),
levels = c("Zero", "Low", "Moderate", "High"),ordered = TRUE)
sleep.amount <- factor(c("6-8 h","<=5 h", "6-8 h", "6-8 h", "<=5 h", "<=5 h", ">8 h","<=5 h", "6-8 h", "<=5 h" ),
levels = c("<=5 h", "6-8 h",">8 h"), ordered = TRUE)
sleep.disturb <- c("NO", "YES", "YES", "NO", "NO", "YES", "YES", "NO", "YES", "NO", "YES")
Sleep.Data <- data.frame(age, sex, caffeine, sleep.amount, sleep.disturb)
sleep.disturb <- c("NO", "YES", "YES", "NO", "NO", "YES", "YES", "NO", "YES", "YES")
Sleep.Data <- data.frame(age, sex, caffeine, sleep.amount, sleep.disturb)
age <-c("18-29", "30-49", "30-49", "18-29", "30-49", ">=70", "30-49", "50-69", "18-29", "50-69")
sex <- factor(c("Male", "Female", "Male", "Male", "Female", "Male", "Female", "Female", "Male", "Male"))
caffeine <- factor(c("Zero", "Low", "Zero", "Low", "High", "Zero", "Moderate", "High", "Moderate", "High"),
levels = c("Zero", "Low", "Moderate", "High"),ordered = TRUE)
sleep.amount <- factor(c("6-8 h","<=5 h", "6-8 h", "6-8 h", "<=5 h", "<=5 h", ">8 h","<=5 h", "6-8 h", "<=5 h" ),
levels = c("<=5 h", "6-8 h",">8 h"), ordered = TRUE)
sleep.disturb <- c("NO", "YES", "YES", "NO", "NO", "YES", "YES", "NO", "YES", "YES")
Sleep.Data <- data.frame(age, sex, caffeine, sleep.amount, sleep.disturb)
View(Sleep.Data)
View(APPLES)
View(Sleep.Data)
caffeine <- c(0, 200, 400, 0, 200, 200, 50, 400, 0, 400)
Sleep.Data <- data.frame(age, sex, caffeine, sleep.amount, sleep.disturb)
View(Sleep.Data)
sleep.break <- c("NO", "YES", "YES", "NO", "NO", "YES", "YES", "NO", "YES", "YES")
Sleep.Data <- data.frame(age, sex, caffeine, sleep.amount, sleep.break)
Sleep.Data <- data.frame(age, sex, caffeine, sleep.amount, sleep.break)
View(Sleep.Data)
View(Sleep.Data)
Sleep.Data <- data.frame(Age = age, SEX = sex, Caffeine (mg) = caffeine, Sleep_Length = sleep.amount, Sleep_Break = sleep.break)
Sleep.Data <- data.frame(Age = age, SEX = sex, Caffeine_(mg) = caffeine, Sleep_Length = sleep.amount, Sleep_Break = sleep.break)
Sleep.Data <- data.frame(Age = age, SEX = sex, Caffeine(mg) = caffeine, Sleep_Length = sleep.amount, Sleep_Break = sleep.break)
Sleep.Data <- data.frame(Age = age, SEX = sex, Caffeine_mg = caffeine, Sleep_Length = sleep.amount, Sleep_Break = sleep.break)
View(Sleep.Data)
head(Sleep.Data, n=3)
tail(Sleep.Data, n=2)
View(Sleep.Data)
dim(Sleep.Data)
colnames(Sleep.Data)
APPLES$Cultivar
View(APPLES)
APPLES$Bramley
Sleep.Data$Caffeine_mg
Sleep.Data[["Caffeine_mg"]]
Sleep.Data[c("Age", "Sleep_Amount")]
View(Sleep.Data)
Sleep.Data[c("Age", "Sleep_Length")]
Sleep.Data[1:3, 1:2]
Sleep.Data[1:3, 1:2]
Sleep.Data[1:2, c("Age", "Sex")]
View(Sleep.Data)
Sleep.Data[1:3, 1:2]
Sleep.Data[1:2, c("Age", "SEX")]
Sleep.Data[1:3, 1:2]
# Or alternatively:
Sleep.Data[1:3, c("Age", "SEX")]
#Exclude columns 1:2
Sleep.Data[, 3:ncol(Sleep.Data)]
#Subset rows 3:5
Sleep.Data[3:5, ]
patient.record <- list(patient.name = c("John Doe", "Jack Smith", "George Williams"), patient.age = c(54, 36, 48), patient.medication = c("paracetamol", "penicillin"), list(c(38.9, 39.1, 37.8, 37.4, 37.1), c(39.5, 39.7, 38.7, 38.6, 37.9), c(38.8, 39.1, 38.6, 37.7, 37.3)))
patient.record
patient.record <- list(patient.name = c("John Doe", "Jack Smith", "George Williams"), patient.age = c(54, 36, 48), patient.medication = c("paracetamol", "penicillin"), list(temperature = c(38.9, 39.1, 37.8, 37.4, 37.1), c(39.5, 39.7, 38.7, 38.6, 37.9), c(38.8, 39.1, 38.6, 37.7, 37.3)))
patient.record
patient.record <- list(patient.name = c("John Doe", "Jack Smith", "George Williams"), patient.age = c(54, 36, 48), patient.medication = c("paracetamol", "penicillin"), temperature =list(c(38.9, 39.1, 37.8, 37.4, 37.1), c(39.5, 39.7, 38.7, 38.6, 37.9), c(38.8, 39.1, 38.6, 37.7, 37.3)))
patient.record
patient.record <- list(patient.name = c("John Doe", "Jack Smith", "George Williams"), patient.age = c(54, 36, 48), patient.medication = c("paracetamol", "penicillin"), temperature =list(patient1 = c(38.9, 39.1, 37.8, 37.4, 37.1), patient2 = c(39.5, 39.7, 38.7, 38.6, 37.9), patient3 = c(38.8, 39.1, 38.6, 37.7, 37.3)))
patient.record
patient.record <- list(patient.name = c("John Doe", "Jack Smith", "George Williams"), patient.age = c(54, 36, 48), patient.medication = c("paracetamol", "penicillin"), temperature =list(c(38.9, 39.1, 37.8, 37.4, 37.1), c(39.5, 39.7, 38.7, 38.6, 37.9), c(38.8, 39.1, 38.6, 37.7, 37.3)))
patient.record
patient.record[2]
#Extract the 1st sub-element from he second element from the list patient.record
patient.record[[2]]
#Extract the 1st sub-element from he second element from the list patient.record
patient.record[[2]][1]
patient.record[2]
patient.record[[4]][3]
patient.record[[4]][3]
patient.record[[4]][[3]]
# Extract the 3rd element from list temperature within the list patient.record
patient.record[[4]][3]
patient.record[2:3]
plot(cars)
installr::updateR()
install.packages("ggplot2")
library("ggplot2")
vanilla_T12_C12 <- read.table(file = "Data/T12_C12_subset.csv", header = T, sep = "\t")
library(BayesFactor)
# Show coloured image
imgcol = readImage(system.file("images", "sample-color.png", package="EBImage"))
library("EBImage")
f = system.file("images", "sample.png", package="EBImage")
img = readImage(f)
print(img, short=TRUE)
#Display the loaded image
EBImage::display(img)
display(img, method="raster")
coords <- locator()
coords
coords <- locator(1)
coords
coords <- locator(1)
coords
coords <- locator(1)
coords
coords <- locator(1)
coords
coords <- locator(1)
coords
coords <- locator(1)
coords
coords <- locator(1)
display(img)
coords <- locator(1)
coords <- locator(1)
coords
identify()
identify(1)
coords <- locator(1)
coords
install.packages("imager")
install.packages("grabsampling")
install.packages("grab")
graphics.off()
windows()
display(img)
display(img, method="raster")
coords <- locator(1)
coords
library("mlr3verse")
#library(mlr3)
library(mlr3viz)
library(mlr3learners)
library(mlr3extralearners)
library(tidyverse)
library(paradox)
library(bbotk)
#library(mlr3extralearners)
#library(GGally)
library(mlbench)
library(tidyverse)
library(paradox)
library(bbotk)
data(Zoo)
#zooD <- as.data.frame(Zoo)
head(Zoo)
zooD <- mutate_all(Zoo, as.factor)
head(zooD)
#Check proportion of each class
round(prop.table(table(zooD$type)) * 100, digits = 1)
##remove samples with number of legs 5,8 which are underrepresented
a<-which(zooD$legs=="8")
b<-which(zooD$legs=="5")
zoo1<-zooD[-c(a,b),]
# create learning task
task_zoo = as_task_classif(type ~ ., data = zoo1)
task_zoo
a<-task_zoo$data()
# default plot: class frequencies
autoplot(task_zoo)
#Check available algorithms for ML
mlr_learners
# load learner and set hyperparameter
learner = lrn("classif.ranger")
## dowload mlrextralearners zip folder from https://github.com/mlr-org/mlr3extralearners/releases/tag/v0.5.49
#install.packages("mlr3")
#install.packages("mlr3verse")
#install.packages("mlbench")
#install.packages("parallelMap")
#install.packages("xgboost")
install.packages("ranger")
library(ranger)
# load learner and set hyperparameter
learner = lrn("classif.ranger")
learner$param_set$ids()
learner$param_set
# train/test split
set.seed(4)
split = mlr3::partition(task_zoo, ratio = 0.67)
# train the model
learner$train(task_zoo, split$train)
learner$model
# predict data
prediction = learner$predict(task_zoo, split$test)
# calculate performance
#classification accuracy
measure = msr("classif.acc")
prediction$score(measure)
#Check all performance measures available
mlr_measures
#confusion matrix
prediction$confusion
library("mlr3viz")
autoplot(prediction)
learner1 = lrn("classif.randomForest",
ntree        = to_tune(200, 500),
mtry  = to_tune(2, 12),
nodesize = to_tune(1, 5),
maxnodes = to_tune(2, 20)
)
resampling = rsmp("cv", folds = 3)
learner1 = lrn("classif.ranger",
ntree        = to_tune(200, 500),
mtry  = to_tune(2, 12),
nodesize = to_tune(1, 5),
maxnodes = to_tune(2, 20)
)
learner1 = lrn("classif.ranger",
num.trees        = to_tune(200, 500),
mtry  = to_tune(2, 12),
nodesize = to_tune(1, 5),
maxnodes = to_tune(2, 20)
)
learner1 = lrn("classif.ranger",
num.trees        = to_tune(200, 500),
mtry  = to_tune(2, 12),
min.node.size = 2,
max.depth = 20
)
resampling = rsmp("cv", folds = 3)
measure = msr("classif.acc")
terminator = trm("evals", n_evals = 50)
terminator
#Now we put everything together into a TuningInstanceSingleCrit with the ti() function.
train_Set<-zoo1[split$train,]
task_train<-as_task_classif(type ~ ., data = train_Set)
instance = ti(
task = task_train,
learner = learner1,
resampling = resampling,
measures = measure,
terminator = terminator
)
instance
#Set up the tuner
tuner = tnr("grid_search", resolution = 5, batch_size = 4)
tuner
#Trigerring tuner
tuner$optimize(instance)
head(as.data.table(instance$archive))
#Final model
learner1$param_set$values = instance$result_learner_param_vals
learner1$train(task_train)
learner1$model
##Test the new model
# predict data
#test_Set <-zoo1[split$test,]
prediction = learner1$predict(task_zoo, split$test)
# calculate performance
#classification accuracy
measure = msr("classif.acc")
prediction$score(measure)
#confusion matrix
prediction$confusion
autoplot(prediction)
########## Pima Indian Diabetes ############################
data("PimaIndiansDiabetes2", package = "mlbench")
PimaIndiansDiabetes2 <- as.data.frame(PimaIndiansDiabetes2)
PimaIndiansDiabetes2 <- na.omit(PimaIndiansDiabetes2)
# create learning task
task_d = as_task_classif(diabetes ~ ., data = PimaIndiansDiabetes2)
task_d
# default plot: class frequencies
autoplot(task_d)
#Check available algorithms for ML
mlr_learners
# load learner and set hyperparameter
learner = lrn("classif.ranger")
learner$param_set$ids()
learner$param_set
# train/test split
set.seed(4)
split = partition(task_d, ratio = 0.67)
# train the model
learner$train(task_d, split$train)
learner$model
# predict data
prediction = learner$predict(task_d, split$test)
# calculate performance
#classification accuracy
measure = msr("classif.acc")
prediction$score(measure)
#Check all performance measures available
mlr_measures
#confusion matrix
prediction$confusion
learner1 = lrn("classif.ranger",
num.trees = to_tune(200, 500),
mtry  = to_tune(2, 12),
min.node.size = 2,
max.depth = 20)
resampling = rsmp("cv", folds = 3)
measure = msr("classif.acc")
terminator = trm("evals", n_evals = 50)
terminator
#Now we put everything together into a TuningInstanceSingleCrit with the ti() function.
train_Set<-PimaIndiansDiabetes2[split$train,]
task_train<-as_task_classif(diabetes ~ ., data = train_Set)
instance = ti(
task = task_train,
learner = learner1,
resampling = resampling,
measures = measure,
terminator = terminator
)
instance
#Set up the tuner
tuner = tnr("grid_search", resolution = 5, batch_size = 4)
tuner
#Trigerring tuner
tuner$optimize(instance)
head(as.data.table(instance$archive))
learner1 = lrn("classif.ranger",
num.trees = to_tune(200, 500),
mtry  = to_tune(2, 8),
min.node.size = 2,
max.depth = 20)
resampling = rsmp("cv", folds = 3)
measure = msr("classif.acc")
terminator = trm("evals", n_evals = 50)
terminator
#Now we put everything together into a TuningInstanceSingleCrit with the ti() function.
train_Set<-PimaIndiansDiabetes2[split$train,]
task_train<-as_task_classif(diabetes ~ ., data = train_Set)
instance = ti(
task = task_train,
learner = learner1,
resampling = resampling,
measures = measure,
terminator = terminator
)
instance
#Set up the tuner
tuner = tnr("grid_search", resolution = 5, batch_size = 4)
tuner
#Trigerring tuner
tuner$optimize(instance)
head(as.data.table(instance$archive))
#Final model
learner1$param_set$values = instance$result_learner_param_vals
learner1$train(task_d)
learner1$model
##Test the new model
# predict data
#test_Set <-zoo1[split$test,]
prediction = learner1$predict(task_d, split$test)
# calculate performance
#classification accuracy
measure = msr("classif.acc")
prediction$score(measure)
measures = msrs(c("classif.tpr", "classif.tnr"))
prediction$score(measures)
#confusion matrix
prediction$confusion
autoplot(prediction)
#Check available algorithms for ML
mlr_learners
learner$param_set$ids()
# Load additional packages
require(matlab, quietly=TRUE)
#require(plsgenomics)
require(R.matlab)
require(mixOmics)
require(rgl)
require(ptw)
source("pretreat.r")
setwd("~/Bioinformatics_MSc/Teaching/Academic Year 2023-2024/ML_Metabolomics_23_24/Monday/Monday_Practical/Practicals-Monday")
